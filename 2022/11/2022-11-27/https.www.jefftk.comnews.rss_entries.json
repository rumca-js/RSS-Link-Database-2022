[{"source": "https://www.jefftk.com/news.rss", "title": "Mastodon's Dubious Crawler Exemption", "description": "<p><span>\n\nWhen you share a link on social media the platform fetches the page\nand includes a preview with your post:\n\n</span>\n\n<p>\n\n<a href=\"https://www.jefftk.com/link-preview-bot-when-allowed-big.png\"><img class=\"mobile-fullwidth\" height=\"516\" src=\"https://www.jefftk.com/link-preview-bot-when-allowed.png\" width=\"550\" /><div class=\"image-vertical-spacer\"></div></a>\n\n</p>\n\n<p>\n\nEven though this happens automatically the system doesn't obey the\nrobots.txt exclusion rules (<a href=\"https://www.rfc-editor.org/rfc/rfc9309.html\">RFC 3909</a>): I have\n<code>/test/no-robots</code> excluded in my <a href=\"https://www.jefftk.com/robots.txt\">robots.txt</a> but that doesn't stop it:\n\n</p>\n\n<p>\n\n<a href=\"https://www.jefftk.com/link-preview-bots-ignore-robots-txt-big.png\"><img class=\"mobile-fullwidth\" height=\"515\" src=\"https://www.jefftk.com/link-preview-bots-ignore-robots-txt.png\" width=\"550\" /><div class=\"image-vertical-spacer\"></div></a>\n\n</p>\n\n<p>\n\nI don't even see a request for <code>robots.txt</code> in my logs.\nBut that's actually ok!  The robots exclusion standard is for\n\"crawlers\", or automated agents.  When I share a link I want the\npreview to be included, and so the bot fetching the page is acting as\nmy agent.  This is the same reason why it's fine that <a href=\"https://www.webpagetest.org/\">WebPageTest</a> and <a href=\"https://pagespeed.web.dev/\">PageSpeed Insights</a> also ignore\n<code>robots.txt</code>: they're fetching specific pages at the user\ns request so they can measure performance.\n\n</p>\n\n<p>\n\nThis puts Mastodon in an awkward situation.  They do want to include\npreviews, because they're trying to do all the standard social network\nthings, and if they respected <code>robots.txt</code> many sites\nyou'd want to be able to preview won't work.  They also <a href=\"https://github.com/mastodon/mastodon/issues/4486\">don't want</a>\nthe originating instance to generate the preview and include it in the\npost, because it's open to abuse:\n\n</p>\n\n<p>\n\n<a href=\"https://www.jefftk.com/abusing-link-previews-big.png\"><img class=\"mobile-fullwidth\" height=\"230\" src=\"https://www.jefftk.com/abusing-link-previews.png\" width=\"550\" /><div class=\"image-vertical-spacer\"></div></a>\n\n</p>\n\n<p>\n\nYou can trust <code>mastodon.mit.edu</code> about what\n<code>@jefftk@mastodon.mit.edu</code> says, but not about what\n<code>newyorktimes.com</code> says.\n\n</p>\n\n<p>\n\nThe approach Mastodon has gone with is to have each instance generate\nlink previews for each incoming link.  This means that while having a\nlink shared on Twitter or Facebook might give you one automated\npageview for the preview, on Mastodon it gives you one for each\ninstance the link is federated to.  For a link shared by a\nwidely-followed account this might mean thousands of link-preview\nrequests hitting a server, and I'd also now consider this traffic to\nbe from an automated agent.\n\n</p>\n\n<p>\n\nI'm not sure what the right approach is for Mastodon.  Making the link\npreview fetcher respect <code>robots.txt</code> (<a href=\"https://github.com/mastodon/mastodon/issues/21738\">Issue\n21738</a>) would be a good start. [1] Longer term I think including\nlink previews when composing a post and handling abuse with\ndefederation seems like it should work as well as the rest of\nMastodon's abuse handling.\n\n</p>\n\n<p>\n\n(<a href=\"https://mastodon.mit.edu/@crschmidt@better.boston/109412294728438003\">context</a>)\n\n</p>\n\n<p>\n<br />\n\n[1] Wouldn't that just add an extra request and increase the load on\nsites even more?  No: everyone builds sites to make serving\n<code>robots.txt</code> very cheaply.  Serving HTML, however, often\ninvolves scripting languages, DB lookups, and other slow\noperations.\n\n  </p>\n\n<p><i>Comment via: <a href=\"https://www.facebook.com/jefftk/posts/pfbid02qSNmuy5B6mJumtcgh9h8mzFicwcHEMRBxqGFGjpT46apJsqcxuyUwVRsVLFrhETLl\">facebook</a>, <a href=\"https://mastodon.mit.edu/@jefftk/109416209502343043\">mastodon</a></i></p>", "link": "https://www.jefftk.com/p/mastodons-dubious-crawler-exemption", "date_published": "2022-11-27 08:00:00+00:00", "persistent": false, "user": null, "language": "en-US"}]